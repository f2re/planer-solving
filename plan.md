# План реализации системы сводного расписания

## 1. Анализ и проектирование
- [x] **Анализ формата входных данных (`522.xlsx` и др.):**
    - Структура: Сетка "День недели + Пара" (строки) x "Учебная неделя" (столбцы).
    - Заголовок: Сложная шапка из 3 строк (№ недели, Месяц, Даты начала недели).
    - Данные: Блок из 3 строк для каждой пары (Предмет, Тип/Кафедра, Аудитория).
- [x] **Анализ формата выходного файла (`Сводное расписание семестр.xlsx`):**
    - Структура: Таймлайн "Месяц -> Неделя -> День" (столбцы) x "Преподаватель -> Пара" (строки).
    - Содержимое ячейки: Многострочный текст (Предмет\nТип\nАудитория\nГруппа).
- [x] **Конфигурация преподавателей (`teachers.json`):**
    - Назначение: Определение порядка следования и доп. информации.

## 2. Подготовка структуры проекта
- [x] Создание базовой структуры каталогов (`src/`, `output/`).
- [x] Инициализация модулей (`__init__.py`).
- [x] Создание структуры для веб-части (`web/backend`, `web/frontend`).

## 3. Разработка модуля загрузки данных (Data Loader)
- [x] Реализация `src/data_loader.py`.
- [x] Функция для чтения `teachers.json`.
- [x] Парсер Excel-файлов групп:
    - [x] Извлечение календаря (недели, месяцы, даты).
    - [x] Чтение сетки расписания (парсинг блоков по 3 строки).
    - [x] Сбор уникальных преподавателей (через таблицу соответствия).
- [x] Обработка объединений ячеек и пустых значений.

## 4. Модуль трансформации данных
- [x] Агрегация данных по преподавателям.
- [x] Маппинг уроков на конкретные даты.
- [x] Подготовка структуры сетки для экспорта.

## 5. Модуль экспорта (Exporter)
- [x] Базовая генерация Excel-файла с использованием `openpyxl`.
- [x] Группировка по месяцам и датам в шапке.
- [x] Заполнение данных по преподавателям и парам.
- [x] Улучшение форматирования (цвета, шрифты, границы) согласно образцу.

## 6. Тестирование и валидация
- [x] Написание unit-тестов для `DataLoader`, `Transformer` и `Exporter`.
- [x] Интеграционное тестирование на файле `obrazec/522.xlsx`.
- [x] Проверка итогового файла на соответствие образцу по оформлению.

## 7. Разработка Веб-сервиса (Backend - FastAPI)
- [x] Проектирование API контрактов (Schemas/Pydantic models).
- [x] Реализация эндпоинтов для управления `teachers.json` (CRUD).
- [x] Реализация эндпоинта для загрузки файлов и запуска генерации расписания.
    - [x] Поддержка одновременной загрузки нескольких файлов (сводное расписание).
- [x] Интеграция с существующим модулем `src/`.

## 8. Разработка Веб-интерфейса (Frontend - Vue.js Standalone Offline)
- [x] Загрузка и размещение библиотек (Vue 3, Bootstrap 5, Axios) в локальную папку `assets/`.
- [x] Создание современной структуры `index.html` с приоритетом на генерацию.
- [x] Реализация реактивной таблицы и формы для редактирования `teachers.json` (в сворачиваемом блоке).
- [x] Реализация современной Drag-and-Drop формы загрузки нескольких Excel-файлов.
- [x] Логика взаимодействия с API через локальный Axios.
- [x] Финализация интерфейса для скачивания `result.xlsx` с адаптивным дизайном.

## 9. Развертывание и эксплуатация
- [x] Создание скрипта `start_web.sh` для быстрого запуска.
- [x] Создание шаблона Systemd сервиса `planner-web.service`.
- [x] Обновление документации в `README.md` (инструкции по деплою и использованию).
